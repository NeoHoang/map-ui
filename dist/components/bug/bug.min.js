var MapzenBug=function(){"use strict";function e(e,t,n,i){return m.analytics===!1?!1:"undefined"==typeof ga?!1:void ga("send","event",g,e,t,n,i)}function t(){!function(e,t,n,i,o,c,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,c=t.createElement(n),a=t.getElementsByTagName(n)[0],c.async=1,c.src=i,a.parentNode.insertBefore(c,a)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-47035811-1","auto"),ga("send","pageview")}function n(){var e=document.createElement("link"),t=document.head.querySelectorAll("link, style")[0];e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",w),"undefined"!==t?document.head.insertBefore(e,t):document.head.appendChild(e)}function i(e,t,n,i){var o=void 0!==window.screenLeft?window.screenLeft:screen.left,c=void 0!==window.screenTop?window.screenTop:screen.top,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,r=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,d=a/2-n/2+o,s=r/3-i/3+c,l=window.open(e,t,"scrollbars=yes, width="+n+", height="+i+", top="+s+", left="+d);window.focus&&l.focus()}function o(){var e,t,n="https://twitter.com/intent/tweet",i=encodeURIComponent(window.location.href);return e=encodeURIComponent(m.tweet?m.tweet:m.name?m.name+", powered by @mapzen":"Check out this project by @mapzen!"),t="?text="+e+"&url="+i,n+t}function c(){var e="https://www.facebook.com/sharer/sharer.php?u=",t=encodeURIComponent(window.location.href);return e+t}function a(){var e=m.link||p,t=m.name?m.name+" Â· Powered by Mapzen":"Powered by Mapzen",n=m.repo||f,i=document.createElement("div");i.id="mz-bug",i.className="mz-bug-container",i.setAttribute("role","widget");var a=r("mapzen",e,t,d),h=r("twitter",o(),"Share this on Twitter",s),w=r("facebook",c(),"Share this on Facebook",l),g=r("github",n,"View source on GitHub",u);return i.appendChild(a),i.appendChild(h),i.appendChild(w),i.appendChild(g),document.body.appendChild(i),i}function r(e,t,n,i){var o=document.createElement("a"),c=document.createElement("div");return c.className="mz-bug-"+e+"-logo",o.href=t,o.target="_blank",o.className="mz-bug-"+e+"-link",o.title=n,o.addEventListener("click",i),o.appendChild(c),o}function d(t){e("click","mapzen logo",m.name)}function s(t){t.preventDefault();var n=o();i(n,"Twitter",580,470),e("click","twitter",m.name)}function l(t){t.preventDefault();var n=c();i(n,"Facebook",580,470),e("click","facebook",m.name)}function u(t){e("click","github",m.name)}var m,h="https:"===window.location.protocol?"https:":"http:",w=h+"//s3.amazonaws.com/assets-staging.mapzen.com/ui/components/bug/bug.min.css",p="https://mapzen.com/",f="https://github.com/mapzen/",g="demo",b=function(i){return window.self!==window.top?!1:(m=i||{},m.analytics="undefined"==typeof i.analytics?!0:i.analytics,m.name=i.name||null,this.opts=m,n(),this.el=a(this.opts),this.twitterEl=this.el.querySelector(".mz-bug-twitter-link"),this.facebookEl=this.el.querySelector(".mz-bug-facebook-link"),this.rebuildLinks(),window.onhashchange=function(){this.rebuildLinks()}.bind(this),void window.setTimeout(function(){"undefined"==typeof ga&&(t(),e("analytics","fallback",null,!0)),e("bug","active",m.name,!0)},0))};return b.prototype.rebuildLinks=function(){this.twitterEl.href=o(),this.facebookEl.href=c()},b}();