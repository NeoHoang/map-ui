var MapzenBug=function(){"use strict";function e(e,t,n,o){return m.analytics===!1?!1:"undefined"==typeof ga?!1:(console.log("Event tracked:",g,e,t,o),void ga("send","event",g,e,t,n,o))}function t(){!function(e,t,n,o,i,c,a){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,c=t.createElement(n),a=t.getElementsByTagName(n)[0],c.async=1,c.src=o,a.parentNode.insertBefore(c,a)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-47035811-1","auto"),ga("send","pageview")}function n(){var e=document.createElement("link"),t=document.head.querySelectorAll("link, style")[0];e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",w),"undefined"!==t?document.head.insertBefore(e,t):document.head.appendChild(e)}function o(e,t,n,o){var i=void 0!==window.screenLeft?window.screenLeft:screen.left,c=void 0!==window.screenTop?window.screenTop:screen.top,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,r=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,d=a/2-n/2+i,l=r/3-o/3+c,s=window.open(e,t,"scrollbars=yes, width="+n+", height="+o+", top="+l+", left="+d);window.focus&&s.focus()}function i(){var e,t,n="https://twitter.com/intent/tweet",o=encodeURIComponent(window.location.href);return e=encodeURIComponent(m.tweet?m.tweet:m.name?m.name+", powered by @mapzen":"Check out this project by @mapzen!"),t="?text="+e+"&url="+o,n+t}function c(){var e="https://www.facebook.com/sharer/sharer.php?u=",t=encodeURIComponent(window.location.href);return e+t}function a(){var e=m.link||p,t=m.name?m.name+" Â· Powered by Mapzen":"Powered by Mapzen",n=m.repo||f,o=document.createElement("div");o.id="mz-bug",o.className="mz-bug-container",o.setAttribute("role","widget");var a=r("mapzen",e,t,d),h=r("twitter",i(),"Share this on Twitter",l),w=r("facebook",c(),"Share this on Facebook",s),g=r("github",n,"View source on GitHub",u);return o.appendChild(a),o.appendChild(h),o.appendChild(w),o.appendChild(g),document.body.appendChild(o),o}function r(e,t,n,o){var i=document.createElement("a"),c=document.createElement("div");return c.className="mz-bug-"+e+"-logo",i.href=t,i.target="_blank",i.className="mz-bug-"+e+"-link",i.title=n,i.addEventListener("click",o),i.appendChild(c),i}function d(t){e("click","mapzen logo",m.name)}function l(t){t.preventDefault();var n=i();o(n,"Twitter",580,470),e("click","twitter",m.name)}function s(t){t.preventDefault();var n=c();o(n,"Facebook",580,470),e("click","facebook",m.name)}function u(t){e("click","github",m.name)}var m,h="https:"===window.location.protocol?"https:":"http:",w=h+"//s3.amazonaws.com/assets-staging.mapzen.com/ui/components/bug/bug.min.css",p="https://mapzen.com/",f="https://github.com/mapzen/",g="demo",b=function(o){return window.self!==window.top?!1:(m=o||{},m.analytics="undefined"==typeof o.analytics?!0:o.analytics,m.name=o.name||null,this.opts=m,n(),this.el=a(this.opts),this.twitterEl=this.el.querySelector(".mz-bug-twitter-link"),this.facebookEl=this.el.querySelector(".mz-bug-facebook-link"),this.rebuildLinks(),window.onhashchange=function(){this.rebuildLinks()}.bind(this),void window.setTimeout(function(){"undefined"==typeof ga&&(console.log("Analytics not detected; loading Mapzen default..."),t(),e("analytics","fallback",null,!0)),e("bug","active",m.name,!0)},0))};return b.prototype.rebuildLinks=function(){this.twitterEl.href=i(),this.facebookEl.href=c()},b}();